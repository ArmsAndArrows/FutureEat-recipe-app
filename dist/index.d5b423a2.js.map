{"mappings":"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","sources":["js/config.js","js/helpers.js","js/model.js","js/views/View.js","js/views/recipeView.js","js/views/searchView.js","js/views/resultsView.js","js/views/paginationView.js","js/views/bookmarksView.js","js/views/addRecipeView.js","js/controller.js"],"sourcesContent":["// export const API_URL = `https://forkify-api.herokuapp.com/api/v2/recipes/${id}?key=8d488d17-fae0-474f-a48f-b7eab7d8c578`\r\nexport const TIMEOUT_SEC = 10;\r\nexport const API_KEY = `key=ca13faa3-9450-415c-9bb6-f24e0a7f9cbe`;\r\n\r\nexport const API_URL = `https://forkify-api.herokuapp.com/api/v2/recipes?search=$`;\r\n\r\nexport const RES_PER_PAGE = 10;\r\n\r\n// https://forkify-api.herokuapp.com/api/v2/recipes/5ed6604591c37cdc054bcdd3?key=8d488d17-fae0-474f-a48f-b7eab7d8c578\r\n","import { TIMEOUT_SEC } from \"./config.js\";\r\n\r\nconst timeout = function (s) {\r\n  return new Promise(function (_, reject) {\r\n    setTimeout(function () {\r\n      reject(new Error(`Request took too long!`));\r\n    }, s * 1000);\r\n  });\r\n};\r\n\r\nexport const AJAX = async function (url, uploadData = undefined) {\r\n  try {\r\n    const fetchPro = uploadData\r\n      ? fetch(url, {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify(uploadData),\r\n        })\r\n      : fetch(url);\r\n\r\n    const res = await Promise.race([fetchPro, timeout(TIMEOUT_SEC)]);\r\n    const data = await res.json();\r\n    if (!res.ok) {\r\n      throw new Error(`${data.message} ${res.status}`);\r\n    }\r\n    return data;\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n","import { API_URL, RES_PER_PAGE } from \"./config.js\";\r\nimport { API_KEY } from \"./config.js\";\r\nimport { AJAX } from \"./helpers.js\";\r\n\r\nexport const state = {\r\n  recipe: {},\r\n  search: {\r\n    query: \"\",\r\n    page: 1,\r\n    results: [],\r\n    resultsPerPage: RES_PER_PAGE,\r\n  },\r\n  bookmarks: [],\r\n};\r\n\r\nconst createRecipeObject = function (data) {\r\n  const { recipe } = data.data;\r\n  return {\r\n    id: recipe.id,\r\n    title: recipe.title,\r\n    publisher: recipe.publisher,\r\n    sourceUrl: recipe.source_url,\r\n    image: recipe.image_url,\r\n    servings: recipe.servings,\r\n    cookingTime: recipe.cooking_time,\r\n    ingredients: recipe.ingredients,\r\n    ...(recipe.key && { key: recipe.key }),\r\n  };\r\n};\r\n\r\nexport const loadRecipe = async function (id) {\r\n  try {\r\n    const data = await AJAX(\r\n      `https://forkify-api.herokuapp.com/api/v2/recipes/${id}?key=ca13faa3-9450-415c-9bb6-f24e0a7f9cbe`\r\n    );\r\n    state.recipe = createRecipeObject(data);\r\n    if (state.bookmarks.some((b) => b.id === id))\r\n      state.recipe.bookmarked = true;\r\n    else state.recipe.bookmarked = false;\r\n  } catch (err) {\r\n    console.error(`${err}`);\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const loadSearchResults = async function (query) {\r\n  try {\r\n    state.search.query = query;\r\n    const data = await AJAX(\r\n      `https://forkify-api.herokuapp.com/api/v2/recipes?search=${query}&${API_KEY}`\r\n    );\r\n    state.search.results = data.data.recipes.map((rec) => {\r\n      return {\r\n        id: rec.id,\r\n        title: rec.title,\r\n        publisher: rec.publisher,\r\n        image: rec.image_url,\r\n        ...(rec.key && { key: rec.key }),\r\n      };\r\n    });\r\n    state.search.page = 1;\r\n  } catch (err) {\r\n    console.log(err);\r\n    throw err;\r\n  }\r\n};\r\n\r\nexport const getSearchResultsPage = function (page = state.search.page) {\r\n  state.search.page = page;\r\n  const start = (page - 1) * state.search.resultsPerPage; //0\r\n  const end = page * 10; //9\r\n  return state.search.results.slice(start, end);\r\n};\r\n\r\nexport const updateServings = function (newServings) {\r\n  state.recipe.ingredients.forEach((ing) => {\r\n    if (ing.quantity) {\r\n      ing.quantity = (\r\n        (ing.quantity * newServings) /\r\n        state.recipe.servings\r\n      ).toFixed(2);\r\n    }\r\n  });\r\n  state.recipe.servings = newServings;\r\n};\r\n\r\nconst persistBookmarks = function () {\r\n  localStorage.setItem(\"bookmarks\", JSON.stringify(state.bookmarks));\r\n};\r\n\r\nexport const addBookmark = function (recipe) {\r\n  state.bookmarks.push(recipe);\r\n\r\n  if (recipe.id === state.recipe.id) state.recipe.bookmarked = true;\r\n  persistBookmarks();\r\n};\r\n\r\nexport const deleteBookmark = function (id) {\r\n  const index = state.bookmarks.findIndex((el) => el.id === id);\r\n  state.bookmarks.splice(index, 1);\r\n\r\n  if (id === state.recipe.id) state.recipe.bookmarked = false;\r\n  persistBookmarks();\r\n};\r\n\r\nconst init = function () {\r\n  const storage = localStorage.getItem(\"bookmarks\");\r\n  if (storage) state.bookmarks = JSON.parse(storage);\r\n};\r\n\r\ninit();\r\n\r\nexport const uploadRecipe = async function (newRecipe) {\r\n  try {\r\n    const ingredients = Object.entries(newRecipe)\r\n      .filter((entry) => entry[0].startsWith(\"ingredient\") && entry[1] !== \"\")\r\n      .map((ing) => {\r\n        const ingArr = ing[1].split(\",\").map((el) => el.trim());\r\n        if (ingArr.length !== 3)\r\n          throw new Error(\"Wrong ingredient format, please use correct format\");\r\n        const [quantity, unit, description] = ingArr;\r\n        return { quantity: quantity ? +quantity : null, unit, description };\r\n      });\r\n    const recipe = {\r\n      title: newRecipe.title,\r\n      source_url: newRecipe.sourceUrl,\r\n      image_url: newRecipe.image,\r\n      publisher: newRecipe.publisher,\r\n      cooking_time: +newRecipe.cookingTime,\r\n      servings: +newRecipe.servings,\r\n      ingredients,\r\n    };\r\n    const data = await AJAX(\r\n      `https://forkify-api.herokuapp.com/api/v2/recipes/?key=ca13faa3-9450-415c-9bb6-f24e0a7f9cbe`,\r\n      recipe\r\n    );\r\n    state.recipe = createRecipeObject(data);\r\n    addBookmark(state.recipe);\r\n  } catch (err) {\r\n    throw err;\r\n  }\r\n};\r\n","export default class View {\r\n  _data;\r\n\r\n  render(data) {\r\n    if (!data || (Array.isArray(data) && data.length === 0))\r\n      return this.renderError();\r\n    this._data = data;\r\n    const markup = this._generateMarkup();\r\n    this._clear();\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n\r\n  update(data) {\r\n    this._data = data;\r\n    const newMarkup = this._generateMarkup();\r\n\r\n    const newDOM = document.createRange().createContextualFragment(newMarkup);\r\n    const newElements = Array.from(newDOM.querySelectorAll(\"*\"));\r\n    const curElements = Array.from(this._parentElement.querySelectorAll(\"*\"));\r\n    newElements.forEach((newEl, i) => {\r\n      const curEl = curElements[i];\r\n\r\n\r\n      if (\r\n        !newEl.isEqualNode(curEl) &&\r\n        newEl.firstChild?.nodeValue.trim() !== \"\"\r\n      ) {\r\n        curEl.textContent = newEl.textContent;\r\n      }\r\n      if (!newEl.isEqualNode(curEl)) {\r\n        Array.from(newEl.attributes).forEach((attr) =>\r\n          curEl.setAttribute(attr.name, attr.value)\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  _clear() {\r\n    this._parentElement.innerHTML = \"\";\r\n  }\r\n  waiting() {\r\n    this._clear();\r\n    this._parentElement.insertAdjacentHTML(\r\n      \"afterbegin\",\r\n      `<img class=\"loading-img\" src=\"assets/recipe-cook.gif\" alt=\"wait for a while\">`\r\n    );\r\n  }\r\n\r\n  renderError(message = this._errorMessage) {\r\n    const markup = `\r\n      <div>\r\n         <div class=\"error\">\r\n            <i class=\"fa-solid fa-bomb\"></i>\r\n            <p class=\"error__msg\">${message}</p>\r\n         </div>\r\n      </div>\r\n      `;\r\n    this._clear();\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n  renderMessage(message = this._message) {\r\n    const markup = `\r\n      <div>\r\n         <div class=\"error\">\r\n         <i class=\"fa-regular fa-face-smile-beam welcome__smile\"></i>\r\n         <p class=\"welcome__message\">\r\n           ${message}\r\n         </p>\r\n         </div>\r\n      </div>\r\n      `;\r\n    this._clear();\r\n    this._parentElement.insertAdjacentHTML(\"afterbegin\", markup);\r\n  }\r\n}\r\n","import View from \"./View.js\"\r\n\r\nclass RecipeView extends View {\r\n  _parentElement = document.querySelector(\".recipe-container\");\r\n  _errorMessage = \"We couldn't find that recipe. Please, try another one\";\r\n  \r\n  addHandlerRender(handler) {\r\n    [\"hashchange\", \"load\"].forEach((ev) => window.addEventListener(ev, handler));\r\n  }\r\n\r\n  addHandlerUpdateServings(handler){\r\n    this._parentElement.addEventListener('click', function(e){\r\n      const btn = e.target.closest('.detail__button');\r\n      if (!btn) return;\r\n      const updateTo = +btn.dataset.updateTo;\r\n      if (+updateTo>0)handler(+updateTo);\r\n    })\r\n  }\r\n\r\n  addHandlerAddBookmark(handler){\r\n    this._parentElement.addEventListener('click', function(e){\r\n      const btn = e.target.closest('.btn--bookmark')\r\n      if (!btn) return;\r\n      handler();\r\n    })\r\n    \r\n  }\r\n\r\n  _generateMarkup() {\r\n    return `<div class=\"recipe\">\r\n    <!--LOGO recipe-->\r\n    <header class=\"recipe__logo\">\r\n      <img\r\n        class=\"recipe__img\"\r\n        src=\"${this._data.image}\"\r\n        alt=\"${this._data.title}\"\r\n      />\r\n      <h1 class=\"recipe__title\">${this._data.title}</h1>\r\n    </header>\r\n     <!--DETAILS-->\r\n    <div class=\"details\">\r\n      <div class=\"details__block\">\r\n        <div class=\"detail\">\r\n          <i class=\"fa-regular fa-clock\"></i\r\n          ><span class=\"detail__number\">${this._data.cookingTime}</span\r\n          ><span class=\"detail__text\">minutes</span>\r\n        </div>\r\n        <div class=\"detail\">\r\n          <i class=\"fa-solid fa-people-group\"></i>\r\n          <span class=\"detail__number\">${this._data.servings}</span>\r\n          <span class=\"detail__text\">servings</span>\r\n          <div class=\"detail__servings\">\r\n            <button data-update-to=\"${this._data.servings - 1}\" class=\"detail__button detail__button--decrease\">-</button>\r\n            <button data-update-to=\"${this._data.servings + 1}\" class=\"detail__button detail__button--increase\">+</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"preview__user-generated ${this._data.key ? \"\" : \"hidden\"}\">\r\n            <i class=\"fa-solid fa-cookie\"></i>\r\n      </div>\r\n      <button class=\"details__bookmark ${this._data.bookmarked ? \"details__bookmark--active\" : \"\"} btn--bookmark \">\r\n        <i class=\"fa-regular fa-bookmark\"></i>\r\n      </button>\r\n    </div>\r\n     <!--INGREDIENTS-->\r\n     <div class=\"ingredients\">\r\n      <h2 class=\"ingredients__title\">Recipe ingredients</h2>\r\n      <ul class=\"ingredients__table\">\r\n        ${this._data.ingredients\r\n          .map(\r\n            (el) =>\r\n              `<li class=\"ingredient\"><i class=\"fa-solid fa-check ingredient__icon\"></i><span class=\"ingredient__number\">${el.quantity ? el.quantity : \" \"} ${el.unit} ${\r\n                 el.description\r\n              }</span>\r\n              \r\n              </li>`\r\n          )\r\n          .join(\"\")}\r\n        \r\n        \r\n        \r\n\r\n\r\n      </ul>\r\n\r\n     </div>\r\n     <!--HOW TO COOK IT-->\r\n     <div class=\"cooking\">\r\n      <h2 class=\"cooking__title\">How to cook it</h2>\r\n      <p class=\"cooking__paragraph\">This recipe was carefully designed and tested by <b>${\r\n        this._data.publisher\r\n      }</b>. Please check out directions at their website. </p>\r\n      <a href=\"${\r\n        this._data.sourceUrl\r\n      }\" class=\"cooking__btn\">Directions <i class=\"fa-solid fa-arrow-right\"></i></a>\r\n\r\n     </div>\r\n  </div>`;\r\n  }\r\n}\r\n\r\nexport default new RecipeView();\r\n","class SearchView {\r\n    _parentElement = document.querySelector('.navigation__form');\r\n    getQuery(){\r\n        const query = this._parentElement.querySelector('.navigation__input').value;\r\n        this._clearInput();\r\n        return query;\r\n    }\r\n    _clearInput(){\r\n        this._parentElement.querySelector('.navigation__input').value = \"\";\r\n    }\r\n    addHandlerSearch(handler){\r\n        this._parentElement.addEventListener('submit', function(e){\r\n            e.preventDefault();\r\n            handler();\r\n\r\n        })\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\nexport default new SearchView();","import View from \"./View.js\";\r\nclass ResultsView extends View {\r\n    _parentElement = document.querySelector('.results');\r\n    _errorMessage = \"No recipes found for your query! Please, try again ;)\";\r\n\r\n    _generateMarkup(){\r\n        return this._data.map(this._generateMarkupPreview).join('');\r\n       \r\n    }\r\n    _generateMarkupPreview(result){\r\n      const id = window.location.hash.slice(1);\r\n        return ` <li class=\"preview\">\r\n        <a href=\"#${result.id}\" class=\"preview__link ${result.id === id ? 'preview__link--active' : \"\"\r\n        }\">\r\n          <figure class=\"preview__fig\">\r\n            <img class=\"preview__img\" src=\"${result.image}\" alt=\"${result.title}\">\r\n            <div class=\"preview__data\">\r\n              <h4 class=\"preview__title\">${result.title}</h4>\r\n              <p class=\"preview__publisher\">${result.publisher  }</p>\r\n              \r\n            </div>\r\n            <div class=\"preview__user-generated\">\r\n              <i class=\"fa-solid fa-cookie\"></i>\r\n            </div>\r\n\r\n          </figure>\r\n        </a>\r\n      </li>\r\n        `  \r\n    }\r\n\r\n}\r\n\r\nexport default new ResultsView(); ","import View from \"./View.js\";\r\n\r\nclass PaginationView extends View {\r\n  _parentElement = document.querySelector(\".pages\");\r\n\r\n  addHandlerClick(handler) {\r\n    this._parentElement.addEventListener(\"click\", function (e) {\r\n      const btn = e.target.closest(\".inline-btn\");\r\n      if (!btn) return;\r\n      const goToPage = +btn.dataset.goto;\r\n      handler(goToPage);\r\n    });\r\n  }\r\n\r\n  _generateMarkup() {\r\n    const currentPage = this._data.page;\r\n    const numPages = Math.ceil(\r\n      this._data.results.length / this._data.resultsPerPage\r\n    );\r\n\r\n    //page 1 and more pages exist\r\n\r\n    if (currentPage === 1 && numPages > 1) {\r\n      return `<div></div> <button data-goto=\"${\r\n        currentPage + 1\r\n      }\" class=\"inline-btn inline-btn--next\"><span>Page ${\r\n        currentPage + 1\r\n      } </span><i class=\"fa-solid fa-arrow-right\"></i></button>`;\r\n    }\r\n\r\n    //last page\r\n    if (currentPage === numPages && numPages > 1) {\r\n      return `<button data-goto=\"${\r\n        currentPage - 1\r\n      }\" class=\"inline-btn inline-btn--prev\"><i class=\"fa-solid fa-arrow-left\"></i><span> Page ${\r\n        currentPage - 1\r\n      }</span></button>`;\r\n    }\r\n\r\n    //other page\r\n    if (currentPage < numPages) {\r\n      return `<button data-goto=\"${\r\n        currentPage - 1\r\n      }\" class=\"inline-btn inline-btn--prev\"><i class=\"fa-solid fa-arrow-left\"></i><span> Page ${\r\n        currentPage - 1\r\n      }</span></button><button data-goto=\"${\r\n        currentPage + 1\r\n      }\" class=\"inline-btn inline-btn--next\"><span>Page ${\r\n        currentPage + 1\r\n      } </span><i class=\"fa-solid fa-arrow-right\"></i></button>`;\r\n    }\r\n\r\n    //page1 and no pages exist\r\n    return \"\";\r\n  }\r\n}\r\n\r\nexport default new PaginationView();\r\n","import View from \"./View.js\";\r\n\r\nclass BookmarksView extends View {\r\n  _parentElement = document.querySelector(\".bookmarks__list\");\r\n  _errorMessage = \"No bookmarks yet. Find a nice recipe and bookmark it :)\";\r\n  _generateMarkup() {\r\n    return this._data.map(this._generateMarkupPreview).join(\"\");\r\n  }\r\n\r\n  addHandlerRender(handler) {\r\n    window.addEventListener(\"load\", handler);\r\n  }\r\n\r\n  _generateMarkupPreview(result) {\r\n    const id = window.location.hash.slice(1);\r\n    return ` <li class=\"preview\">\r\n      <a href=\"#${result.id}\" class=\"preview__link\">\r\n        <figure class=\"preview__fig\">\r\n          <img class=\"preview__img\" src=\"${result.image}\" alt=\"test\">\r\n          <div class=\"preview__data\">\r\n            <h4 class=\"preview__title\">${result.title}</h4>\r\n            <p class=\"preview__publisher\">${result.publisher}</p>\r\n            \r\n          </div>\r\n          <div class=\"preview__user-generated\">\r\n          <i class=\"fa-solid fa-cookie\"></i>\r\n          </div>\r\n\r\n        </figure>\r\n      </a>\r\n    </li>\r\n      `;\r\n  }\r\n}\r\n\r\nexport default new BookmarksView();\r\n","import View from \"./View.js\";\r\n\r\nclass AddRecipeView extends View {\r\n  _parentElement = document.querySelector(\".upload\");\r\n  _message = \"Recipe was successfully uploaded :)\"\r\n  _window = document.querySelector(\".add-recipe-window\");\r\n  _overlay = document.querySelector(\".overlay\");\r\n  _btnOpen = document.querySelector(\".navigation__link--add-recipe\");\r\n  _btnClose = document.querySelector(\".btn--close-modal\");\r\n\r\n  constructor() {\r\n    super();\r\n    this._addHandlerShowWindow();\r\n    this._addHandlerHideWindow();\r\n  }\r\n  toggleWindow() {\r\n    this._overlay.classList.toggle(\"hidden\");\r\n    this._window.classList.toggle(\"hidden\");\r\n  }\r\n  _addHandlerShowWindow() {\r\n    this._btnOpen.addEventListener(\r\n      \"click\",\r\n\r\n      this.toggleWindow.bind(this)\r\n    );\r\n  }\r\n  _addHandlerHideWindow() {\r\n    this._btnClose.addEventListener(\"click\", this.toggleWindow.bind(this));\r\n    this._overlay.addEventListener(\"click\", this.toggleWindow.bind(this));\r\n  }\r\n\r\n  addHandlerUpload(handler){\r\n    this._parentElement.addEventListener('submit', function(e){\r\n        e.preventDefault();\r\n        const dataArr = [...new FormData(this)];\r\n        const data = Object.fromEntries(dataArr);\r\n        handler(data); \r\n    })\r\n  }\r\n}\r\n\r\nexport default new AddRecipeView();\r\n","import * as model from \"./model.js\";\r\nimport RecipeView from \"./views/recipeView.js\";\r\nimport SearchView from \"./views/searchView.js\";\r\nimport ResultsView from \"./views/resultsView.js\";\r\nimport PaginationView from \"./views/paginationView.js\";\r\nimport BookmarksView from \"./views/bookmarksView.js\";\r\nimport AddRecipeView from \"./views/addRecipeView.js\";\r\n\r\nconst controlRecipes = async function () {\r\n  //1. LOADING\r\n  try {\r\n    const id = window.location.hash.slice(1);\r\n    if (!id) return;\r\n    RecipeView.waiting();\r\n\r\n    ResultsView.update(model.getSearchResultsPage());\r\n\r\n    await model.loadRecipe(id);\r\n\r\n    //2. RENDERING\r\n    RecipeView.render(model.state.recipe);\r\n    BookmarksView.update(model.state.bookmarks);\r\n    document\r\n      .querySelector(\".search-results\")\r\n      .classList.remove(\"search-results--mobile\");\r\n  } catch (err) {\r\n    console.log(err);\r\n    RecipeView.renderError(\r\n      `We could not find that recipe. Please Try another one!`\r\n    );\r\n  }\r\n};\r\n\r\nconst controlSearchResults = async function () {\r\n  try {\r\n    const query = SearchView.getQuery();\r\n    if (!query) return;\r\n    ResultsView.waiting();\r\n    document\r\n      .querySelector(\".search-results\")\r\n      .classList.add(\"search-results--mobile\");\r\n    await model.loadSearchResults(query);\r\n\r\n    ResultsView.render(model.getSearchResultsPage(1));\r\n\r\n    BookmarksView.update(model.state.bookmarks);\r\n\r\n    PaginationView.render(model.state.search);\r\n  } catch (err) {\r\n    console.log(err);\r\n    RecipeView.renderError(`${err}`);\r\n  }\r\n};\r\n\r\nconst controlPagination = function (goToPage) {\r\n  ResultsView.render(model.getSearchResultsPage(goToPage));\r\n  PaginationView.render(model.state.search);\r\n};\r\n\r\nconst controlServings = function (newServings) {\r\n  //update recipe servings in state\r\n  model.updateServings(newServings);\r\n\r\n  //update the recipe view\r\n  RecipeView.render(model.state.recipe);\r\n};\r\n\r\nconst controlAddBookmark = function () {\r\n  if (!model.state.recipe.bookmarked) model.addBookmark(model.state.recipe);\r\n  else model.deleteBookmark(model.state.recipe.id);\r\n\r\n  RecipeView.update(model.state.recipe);\r\n\r\n  BookmarksView.render(model.state.bookmarks);\r\n};\r\n\r\nconst controlBookmarks = function () {\r\n  BookmarksView.render(model.state.bookmarks);\r\n};\r\n\r\nconst controlAddRecipe = async function (newRecipe) {\r\n  try {\r\n    AddRecipeView.waiting();\r\n\r\n    await model.uploadRecipe(newRecipe);\r\n    RecipeView.render(model.state.recipe);\r\n    AddRecipeView.renderMessage();\r\n\r\n    BookmarksView.render(model.state.bookmarks);\r\n\r\n    window.history.pushState(null, \"\", `#${model.state.recipe.id}`);\r\n\r\n    setTimeout(function () {\r\n      AddRecipeView.toggleWindow();\r\n    }, 2500);\r\n  } catch (err) {\r\n    console.log(err);\r\n    AddRecipeView.renderError(err.message);\r\n    setTimeout(function () {\r\n      location.reload();\r\n    }, 5000);\r\n  }\r\n};\r\n\r\nconst init = function () {\r\n  BookmarksView.addHandlerRender(controlBookmarks);\r\n  RecipeView.addHandlerRender(controlRecipes);\r\n  RecipeView.addHandlerUpdateServings(controlServings);\r\n  RecipeView.addHandlerAddBookmark(controlAddBookmark);\r\n  SearchView.addHandlerSearch(controlSearchResults);\r\n  PaginationView.addHandlerClick(controlPagination);\r\n  AddRecipeView.addHandlerUpload(controlAddRecipe);\r\n};\r\n\r\ninit();\r\n"],"names":["$55e824ff15c161b3$export$2b3ff41fecbef7c8","async","url","uploadData","fetchPro","fetch","method","headers","body","JSON","stringify","res","Promise","race","s","_","reject","setTimeout","Error","data","json","ok","message","status","err","$f381a3c3b9cf5311$export$ca000e230c0caa3e","recipe","search","query","page","results","resultsPerPage","bookmarks","$f381a3c3b9cf5311$var$createRecipeObject","id","title","publisher","sourceUrl","source_url","image","image_url","servings","cookingTime","cooking_time","ingredients","key","$f381a3c3b9cf5311$export$8d7f79465139ab72","start","end","slice","$f381a3c3b9cf5311$var$persistBookmarks","localStorage","setItem","$f381a3c3b9cf5311$export$72009cc673d27d80","push","bookmarked","storage","getItem","parse","$f381a3c3b9cf5311$var$init","$979d8bedf0abc0db$export$2e2bcd8739ae039","_data","render","Array","isArray","length","this","renderError","markup","_generateMarkup","_clear","_parentElement","insertAdjacentHTML","update","newMarkup","newDOM","document","createRange","createContextualFragment","newElements","from","querySelectorAll","curElements","forEach","newEl","i","curEl","isEqualNode","firstChild","nodeValue","trim","textContent","attributes","attr","setAttribute","name","value","innerHTML","waiting","_errorMessage","renderMessage","_message","$6e1749ef4a57ed73$export$2e2bcd8739ae039","querySelector","addHandlerRender","handler","ev","window","addEventListener","addHandlerUpdateServings","e","btn","target","closest","updateTo","dataset","addHandlerAddBookmark","map","el","quantity","unit","description","join","$bfa3fc362cee6467$export$2e2bcd8739ae039","getQuery","_clearInput","addHandlerSearch","preventDefault","$8f1f46095f7e634a$export$2e2bcd8739ae039","_generateMarkupPreview","result","location","hash","$a4d52f5bb2597adb$export$2e2bcd8739ae039","addHandlerClick","goToPage","goto","currentPage","numPages","Math","ceil","$d84da2ac8cdc4a66$export$2e2bcd8739ae039","$cdb0fe0ee1216733$export$2e2bcd8739ae039","_window","_overlay","_btnOpen","_btnClose","constructor","super","_addHandlerShowWindow","_addHandlerHideWindow","toggleWindow","classList","toggle","bind","addHandlerUpload","dataArr","FormData","Object","fromEntries","$03cf872f16b5d10b$var$controlRecipes","some","b","console","error","$f381a3c3b9cf5311$export$b96725c7a035d60b","remove","log","$03cf872f16b5d10b$var$controlSearchResults","add","recipes","rec","$f381a3c3b9cf5311$export$202b8e5cb363a0c4","$03cf872f16b5d10b$var$controlPagination","$03cf872f16b5d10b$var$controlServings","newServings","ing","toFixed","$f381a3c3b9cf5311$export$5e23f4642ecad5ea","$03cf872f16b5d10b$var$controlAddBookmark","index","findIndex","splice","$f381a3c3b9cf5311$export$136048bcb9946c75","$03cf872f16b5d10b$var$controlBookmarks","$03cf872f16b5d10b$var$controlAddRecipe","newRecipe","entries","filter","entry","startsWith","ingArr","split","$f381a3c3b9cf5311$export$d660c2254e74960d","history","pushState","reload"],"version":3,"file":"index.d5b423a2.js.map"}